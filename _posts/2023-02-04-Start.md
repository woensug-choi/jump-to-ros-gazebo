---
title: â‘ ROS-Gazebo ì‹œì‘í•˜ê¸°
author: Woen-Sug Choi
date: 2023-01-29
category: Jekyll
layout: post
---

# **â—¼ ì‹œìŠ¤í…œ í™˜ê²½ êµ¬ì„±**

## ë¦¬ëˆ…ìŠ¤ í™˜ê²½ êµ¬ì„± ë°©ë²•

ROSì™€ Gazebo ëª¨ë‘ ìœˆë„ìš°ì™€ ë¦¬ëˆ…ìŠ¤ ì–´ëŠ ìš´ì˜ì²´ì œì—ì„œë„ ì„¤ì¹˜ ê°€ëŠ¥í•˜ë‹¤. ê·¸ëŸ¬ë‚˜ ê° í”„ë¡œê·¸ë¨ì´ ë¦¬ëˆ…ìŠ¤ í™˜ê²½ì—ì„œ ê°œë°œë˜ì—ˆë‹¤ëŠ”ê²ƒì„ ê³ ë ¤í•  ë•Œ <span style="color: #9645FF">**ë¦¬ëˆ…ìŠ¤ í™˜ê²½**</span>ì— ì„¤ì¹˜í•˜ëŠ” ê²ƒì´ ì—¬ëŸ¬ëª¨ë¡œ ìì—°ìŠ¤ëŸ½ê³  ë¶ˆí•„ìš”í•œ ì˜¤ë¥˜ë¥¼ íšŒí”¼í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ROS-Gazebo í”„ë ˆì„ì›Œí¬ë¥¼ ì„¤ì¹˜í•˜ê¸° ìœ„í•´ì„œëŠ” ë¦¬ëˆ…ìŠ¤ í™˜ê²½ì´ í•„ìš”í•˜ë‹¤. 

- <span style="color: #9645FF">**ë¦¬ëˆ…ìŠ¤ í™˜ê²½ êµ¬ì„±ë°©ë²•**</span>
  - [**[ğŸ˜ ì¶”ì²œ!] ìœˆë„ìš°ì— WSL<sup>âœ±1</sup>ì„ ì´ìš©í•œ ë¦¬ëˆ…ìŠ¤ ê°€ìƒí™˜ê²½ êµ¬ì„±**](#ì˜µì…˜-1-ìœˆë„ìš°-wsl-ê°€ìƒí™”)
  - [**ë„¤ì´í‹°ë¸Œ ë¦¬ëˆ…ìŠ¤ í™˜ê²½ êµ¬ì„± (ë“€ì–¼ë¶€íŒ…, ë˜ëŠ” í¬ë§· í›„ ë¦¬ëˆ…ìŠ¤ë§Œ ì„¤ì¹˜)**](#ì˜µì…˜-2-ë„¤ì´í‹°ë¸Œ-ë¦¬ëˆ…ìŠ¤-í™˜ê²½)
  - [**ì• í”Œ ì‹¤ë¦¬ì½˜ ë§¥ë¶ (i.e. M1 Macbook) í™˜ê²½**](#Mac-OSì—-ì„¤ì¹˜)

> **<sup>âœ±1</sup> WSL(Windows Subsystem for Linux)**
> - ìœˆë„ìš°ì—ì„œ ë„¤ì´í‹°ë¸Œë¡œ ë¦¬ëˆ…ìŠ¤ ì‹¤í–‰íŒŒì¼ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•œ í˜¸í™˜ì„± í•˜ìœ„ ê³„ì¸µ
      - ìœˆë„ìš°ì—ì„œ ë¦¬ëˆ…ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ê°€ìƒí™” ë„êµ¬
      - ë“€ì–¼ë¶€íŒ… ì„¤ì • ë¶ˆí•„ìš”. ê°€ìƒë¨¸ì‹ í™” ë¶ˆí•„ìš”. ë¹ ë¥¸ ì†ë„ ì¥ì 
> - 2016ë…„ì— WSLì²˜ìŒ ë“±ì¥ 2019ë…„ì— WSL2 ë“±ì¥. Microsoft ì¬ì •ê¸°ë°˜ìœ¼ë¡œ ì§„í–‰ë˜ê³  ìˆì–´ì„œ ê°œë°œì†ë„ê°€ ë§¤ìš° ë¹ ë¦„
      - ì˜ˆë¥¼ë“¤ì–´ Ubuntuì—ì„œ [X.org](http://X.org) (ê·¸ë˜í”½ í‘œí˜„ ì‹œìŠ¤í…œ)ì„ ì°¨ì„¸ëŒ€ Waylandë¡œ 21.04 ë²„ì „ì—ì„œ ë³€í™˜í–ˆê³  22.04 (2022ë…„ 4ì›”) ë¶€í„° ë°°í¬í–ˆëŠ”ë°, WSLì€ 2020ë¶€í„° ì´ë¯¸ Wayland ê¸°ë°˜ìœ¼ë¡œ ê°œë°œë¨

### ì˜µì…˜ 1. ìœˆë„ìš° WSL ê°€ìƒí™”

ë¦¬ëˆ…ìŠ¤ í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì€ ë¦¬ëˆ…ìŠ¤ë¥¼ ë¶€íŒ… ìš´ì˜ì²´ì œë¡œì¨ ì‚¬ìš©í•˜ëŠ” ë„¤ì´í‹°ë¸Œ ë°©ì‹ê³¼ ìœˆë„ìš° ìš´ì˜ì²´ì œ PCì—ì„œ ê°€ìƒí™˜ê²½ìœ¼ë¡œ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤. **ì¼ë°˜ì ìœ¼ë¡œ ê°€ìƒí™˜ê²½ì€ ì„±ëŠ¥ì €í•˜ë¥¼ ì•¼ê¸°í•˜ë‚˜, 2016ë…„ì— ë“±ì¥í•œ ìœˆë„ìš° ì •ì‹ WSL ê°€ìƒí™˜ê²½ì„ í™œìš©í•˜ë©´ ì„±ëŠ¥ì €í•˜ ì—†ì´<sup>âœ±2</sup> ë¦¬ëˆ…ìŠ¤ í™˜ê²½ì„ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.** ì´ë ‡ê²Œ êµ¬ì„±í•  ê²½ìš° ì „ì²´ì ì¸ êµ¬ë™ ì‹œìŠ¤í…œì€ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ êµ¬ì„±ëœë‹¤.

<div class="mermaid" style="text-align:center;"> 
%% GRAPH TYPE %%
graph LR;

%% Colors %% 
classDef blue fill:#2374f7,stroke:#000,stroke-width:2px,color:#fff
classDef pink fill:#eb3dd6,stroke:#000,stroke-width:2px,color:#fff
classDef orange fill:#fc822b,stroke:#000,stroke-width:2px,color:#fff
classDef red fill:#ed2633,stroke:#000,stroke-width:2px,color:#fff
classDef green fill:#16b522,stroke:#000,stroke-width:2px,color:#fff

%% CONTENTS %%
  oid1("Base OS (ìœˆë„ìš°)"):::blue--ê°€ìƒí™”--oWSL:::green;
  WSL--oid1("ë¦¬ëˆ…ìŠ¤ OS (Ubuntu)"):::orange;
  id1("ë¦¬ëˆ…ìŠ¤(Ubuntu)"):::orange--êµ¬ë™-.-ROS;
  id1("ë¦¬ëˆ…ìŠ¤(Ubuntu)"):::orange--êµ¬ë™-.-Gazebo;
</div>

> <sup>âœ±2</sup> íŒŒì¼ì˜ ì½ê¸°ì“°ê¸° ì„±ëŠ¥ì— ì œí•œì´ ìˆìœ¼ë‚˜ ê³„ì‚°ì†ë„ì—ì„œëŠ” ë„¤ì´í‹°ë¸Œì™€ ì°¨ì´ê°€ ê±°ì˜ ì—†ë‹¤.

#### ìœˆë„ìš° WSL í™˜ê²½ ì¤€ë¹„
- ìœˆë„ìš° 11
  - **ìœˆë„ìš° 11ë¶€í„°ëŠ” WSLì„ ì„¤ì¹˜í•˜ê¸° ìœ„í•œ í™˜ê²½ì´ ì´ë¯¸ êµ¬ì„±ë˜ì–´ ìˆìŒ**
- ìœˆë„ìš° 10
  - ë²„ì „ 2004 (ë¹Œë“œ 19041) ì´ìƒ
  - ì´ì „ ë²„ì „ì˜ ê²½ìš° [ìˆ˜ë™ ì„¤ì¹˜](https://learn.microsoft.com/ko-kr/windows/wsl/install-manual)

##### WSL2 ì„¤ì¹˜

ìœˆë„ìš° ì‹œì‘ë²„íŠ¼ì„ ì˜¤ë¥¸ìª½ í´ë¦­í•´ Windows PowerShell(ê´€ë¦¬ì) ì‹¤í–‰ì„ í´ë¦­, ìœˆë„ìš° í„°ë¯¸ë„ì„ ê´€ë¦¬ì ëª¨ë“œë¡œ ì‹¤í–‰í•˜ê³  ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œ ë‹¤ìŒ ì»´í“¨í„°ë¥¼ ë‹¤ì‹œ ì‹œì‘í•œë‹¤. ì´ë•Œ WSLì˜ ì„¤ì¹˜ì™€ í•¨ê»˜ ë¦¬ëˆ…ìŠ¤ ìš´ì˜ì²´ì œ ì¤‘ í•˜ë‚˜ì¸ Ubuntuì˜ 22.04 ë²„ì „ì„ í•¨ê»˜ ì„¤ì¹˜í•˜ë©°, ì„¤ì¹˜ê³¼ì •ì—ì„œ Ubuntuì—ì„œ ì‚¬ìš© í•  ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •í•˜ê²Œ ëœë‹¤.

```bash
wsl --install Ubuntu-22.04
```

ì¬ì‹œì‘ í›„, ë‹¤ì‹œ Windows PowerShell(ê´€ë¦¬ì)ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ Ubuntu 22.04ë¥¼ ì‹¤í–‰í•˜ëŠ” WSLì˜ ë²„ì „ì„ 2ë¡œ ì„¤ì •í•œë‹¤.

```bash
wsl --set-version Ubuntu-22.04 2
```

* WSL ì„¤ì¹˜ ê³µì‹ë¬¸ì„œ (ì˜ë¬¸)
    - [Install Linux on Windows with WSL](https://learn.microsoft.com/en-us/windows/wsl/install)
* (ğŸ˜ ì¶”ì²œ!) Install Windows Terminal to access Ubuntu in WSL2
    - [Windows Terminal (Microsoft Store)](https://www.microsoft.com/ko-kr/p/windows-terminal/9n0dx20hk701)


##### (í•„ìš” ì‹œ) ì™¸ì¥ê·¸ë˜í”½ ë“œë¼ì´ë²„ ì„¤ì •

ì™¸ì¥ê·¸ë˜í”½ì„ ì‚¬ìš©í•˜ë©´ Gazebo ì‹œë®¬ë ˆì´í„°ì˜ ë Œë”ë§ ì†ë„ (FPS) ê°€ í¬ê²Œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤. WSLì€ Intel, AMD, NVIDIA ê·¸ë˜í”½ ë“œë¼ì´ë²„ë¥¼ ê³µì‹ ì§€ì›í•˜ê³  ìˆë‹¤. ë¨¼ì € ìœ„ì˜ **WSL2 ì„¤ì¹˜**ë¥¼ í†µí•´ ìš°ë¶„íˆ¬ë¥¼ ì„¤ì¹˜í–ˆë‹¤ë©´ ìœˆë„ìš° ì‹œì‘ë²„íŠ¼ì„ ëˆ„ë¥´ê³  Ubuntuë¥¼ ê²€ìƒ‰í•´ ì‹¤í–‰ì‹œí‚¨ë‹¤. (Windows Termianlì„ ì„¤ì¹˜í–ˆë‹¤ë©´ ë©‹ì§„ ì»¤ë§¨ë“œì°½ì´ ëœ° ê²ƒì´ë‹¤)

ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ í•´, í˜„ì¬ ê·¸ë˜í”½ í™”ë©´ êµ¬ì„± ìƒíƒœë¥¼ í™•ì¸í•œë‹¤.

```bash
sudo apt update
sudo apt install -y x11-apps
xeyes
```

xeyesë¥¼ ì‹¤í–‰í•˜ë©´ ë‘ ëˆˆì´ ë³´ì´ëŠ” ì°½ì´ ëœ¨ê³  ë§ˆìš°ìŠ¤ë¥¼ ë”°ë¼ ê°ˆ ê²ƒì´ë‹¤. ì´ì œ ì™¸ì¥ê·¸ë˜í”½ GPUê°€ì†ì„ í™•ì¸í•´ë³´ì.

```bash
sudo apt-get install -y mesa-utils
glxgears
```

ë§ë¬¼ë ¤ê°€ëŠ” ê¸°ì–´ê°€ ë³´ì¼ ê²ƒì´ë‹¤. ì˜ ë³´ì¸ë‹¤ë©´ ì´ë¯¸ ì„¤ì •ì´ ì˜ ë˜ì–´ìˆëŠ”ê²ƒì´ë©° ì•„ë‹ˆë¼ë©´, ì•„ë˜ ë§í¬ë¥¼ í†µí•´ ì™¸ì¥ ê·¸ë˜í”½ ë“œë¼ì´ë²„ë¥¼ ì„¤ì¹˜í•œë‹¤.

- WSL ê·¸ë˜í”½ê°€ì†ì„ ìœ„í•œ ì™¸ì¥ê·¸ë˜í”½ ë“œë¼ì´ë²„
  - [NVIDIA ë“œë¼ì´ë²„](https://developer.nvidia.com/cuda/wsl)
  - [AMD ë“œë¼ì´ë²„](https://www.amd.com/en/support/kb/release-notes/rn-rad-win-wsl-support)
  - [Intel ë“œë¼ì´ë²„](https://www.intel.com/content/www/us/en/download/19344/intel-graphics-windows-dch-drivers.html)

ì„¤ì¹˜ ì™„ë£Œ í›„, ì¬ë¶€íŒ…í•˜ê³  ë‹¤ì‹œ ìš°ë¶„íˆ¬ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ë³¸ë‹¤.

```bash
glxinfo | grep OpenGL
```

ê·¸ëŸ¬ë©´ ë‹¤ìŒê³¼ ìœ ì‚¬í•œ ë©”ì„¸ì§€ê°€ ëœ° ê²ƒì´ë‹¤. 
```bash
OpenGL vendor string: Microsoft Corporation
OpenGL renderer string: D3D12 (NVIDIA GeForce GTX 1660 Ti)
```

ë§Œì•½, ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ë©´,
```bash
sudo add-apt-repository ppa:kisak/kisak-mesa && sudo apt-get update && sudo apt dist-upgrade
```

### ì˜µì…˜ 2. ë„¤ì´í‹°ë¸Œ ë¦¬ëˆ…ìŠ¤ í™˜ê²½

ë„¤ì´í‹°ë¸Œ ë¦¬ëˆ…ìŠ¤ í™˜ê²½êµ¬ì„±ì€ PCì—ì„œ ë¦¬ëˆ…ìŠ¤ ìš´ì˜ì²´ì œë¥¼ Base OSë¡œ êµ¬ë™í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì˜µì…˜ 1ì˜ WSLì„ ì´ìš©í•˜ëŠ” ë°©ë²•ë³´ë‹¤ êµ¬ë™í™˜ê²½ì´ ë‹¨ìˆœí•˜ë‚˜ ìœˆë„ìš°ì™€ ë¦¬ëˆ…ìŠ¤ë¥¼ ë™ì‹œì— êµ¬ë™í•  ìˆ˜ ì—†ì–´ ë‹¤ì‹œ ë§¤ë²ˆ ì¬ë¶€íŒ…ì„ í•´ì•¼í•˜ëŠ” í° ì œì•½ì„ ê°€ì§€ê³  ìˆë‹¤. ë‹¤ë¥¸ ìš©ë„ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©° ê³ ì •ëœ ì„œë²„ ì»´í“¨í„°ì˜ ê²½ìš° ìœ ìš©í•  ìˆ˜ ìˆìœ¼ë‚˜, ë¦¬ëˆ…ìŠ¤ ì»´í“¨í„°ì˜ ì›ê²©ì œì–´ëŠ” í•­ìƒ ë§¤ë„ëŸ½ì§€ ëª»í•´ ë¬¸ì œê°€ ë°œìƒí•  ê²½ìš° ì ‘ê·¼ì´ ì–´ë ¤ì›Œì§€ëŠ” ê²½ìš°ê°€ ë¹ˆë²ˆíˆ ë°œìƒí•˜ê³¤ í•œë‹¤.

#### ë¦¬ëˆ…ìŠ¤ ë„¤ì´í‹°ë¸Œ ì„¤ì¹˜ (feat. Ubuntu)

- Ubuntu ì„¤ì¹˜ í•„ìš” í•˜ë“œì›¨ì–´ í™•ì¸
  - ** ìµœì†Œ 8GB, ê¶Œì¥ 12GB ì´ìƒ USB ë“œë¼ì´ë¸Œ **, 25GB ì´ìƒ ë¹ˆ í•˜ë“œì›¨ì–´ ìš©ëŸ‰
- Ubuntu ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ : [22.04.1 Desktopë²„ì „ ë‹¤ìš´ë¡œë“œ ë§í¬](https://releases.ubuntu.com/22.04.1/ubuntu-22.04.1-desktop-amd64.iso)
- ë¶€íŒ…ê°€ëŠ¥ USB ë“œë¼ì´ë¸Œ êµ¬ì„±
  - ë¬´ì„¤ì¹˜ ë¶€íŒ… USB ë§Œë“¤ê¸° í”„ë¡œê·¸ë¨ Rufus ë‹¤ì˜¨ë£¨ë“œ : [3.21 í¬í„°ë¸” ë²„ì „ ë‹¤ìš´ë¡œë“œ ë§í¬](https://github.com/pbatard/rufus/releases/download/v3.21/rufus-3.21p.exe)
  - ì‹¤í–‰í•´ ë‹¤ìš´ë°›ì€ Ubuntu ì´ë¯¸ì§€ì™€ USB ë“œë¼ì´ë¸Œë¥¼ ì„ íƒí•´ Ubuntu ì„¤ì¹˜ USB ë“œë¼ì´ë¸Œ êµ¬ì„±
- Ubuntu ì„¤ì¹˜ USB ë“œë¼ì´ë¸Œë¡œ ë¶€íŒ…
  - ì¬ì‹œì‘ ì‹œ, F12í‚¤ (ì‹œìŠ¤í…œì´ ë”°ë¼ ë‹¤ë¦„, F9í‚¤ ë˜ëŠ” F2í‚¤ ê°€ëŠ¥ì„± ìˆìŒ)ë¥¼ ëˆŒëŸ¬ USB ë¶€íŒ…ì„ ì„ íƒí•˜ê³ , ì„¤ì¹˜ ì•ˆë‚´ì— ë”°ë¼ Ubuntu ì„¤ì¹˜
  - *** ì´ë•Œ Drive êµ¬ì„±ì—ì„œ, ê¸°ì¡´ì˜ ìœˆë„ìš° í™˜ê²½ì„ ì‚­ì œí•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•œë‹¤ ***
- ì„¤ì¹˜ ì™„ë£Œ í›„, ì¬ì‹œì‘í•˜ê³  Ubuntuë¡œ ë¶€íŒ…


<div class="mermaid" style="text-align:center;"> 
%% GRAPH TYPE %%
graph LR;

%% Colors %% 
classDef blue fill:#2374f7,stroke:#000,stroke-width:2px,color:#fff
classDef pink fill:#eb3dd6,stroke:#000,stroke-width:2px,color:#fff
classDef orange fill:#fc822b,stroke:#000,stroke-width:2px,color:#fff
classDef red fill:#ed2633,stroke:#000,stroke-width:2px,color:#fff
classDef green fill:#16b522,stroke:#000,stroke-width:2px,color:#fff

%% CONTENTS %%
  oid1("Base OS (ë¦¬ëˆ…ìŠ¤ Ubuntu)"):::blue--êµ¬ë™-.-ROS;
  oid1("Base OS (ë¦¬ëˆ…ìŠ¤ Ubuntu)"):::blue--êµ¬ë™-.-Gazebo;
</div>


# **â—¼ ROS-Gazebo ì„¤ì¹˜**

## ROS-Gazebo ì„¤ì¹˜ë°©ë²•

ë¦¬ëˆ…ìŠ¤ (Ubuntu) í™˜ê²½ì—ì„œ ROSì™€ Gazeboë¥¼ êµ¬ë™í•˜ëŠ” ë°©ë²•ì€ ì§ì ‘ ì„¤ì¹˜ì™€ Dockerêµ¬ì„±ì´ ìˆë‹¤. 

- <span style="color: #9645FF">**ROS/Gazebo ì„¤ì¹˜ë°©ë²•**</span>
  - [**[ğŸ˜ ì¶”ì²œ!] ë¦¬ëˆ…ìŠ¤ (Ubuntu) ì— ì§ì ‘ ì„¤ì¹˜**](#ì˜µì…˜-1-ubuntuì—-ì§ì ‘ì„¤ì¹˜)
  - [**Docker<sup>âœ±3</sup>ë¥¼ ì´ìš©í•œ ì„¤ì¹˜**](#ì˜µì…˜-2-dockerë¡œ-ì„¤ì¹˜)

> <sup>âœ±3</sup> Dockerì— ëŒ€í•œ ì„¤ëª…ê³¼ ê¸°ì´ˆí•™ìŠµì€ [Docker í•™ìŠµ]({% post_url 2099-01-01-Aux %}#docker)ì— ìˆë‹¤.


<div class="mermaid" style="text-align:center;"> 
%% GRAPH TYPE %%
graph LR;

%% Colors %% 
classDef blue fill:#2374f7,stroke:#000,stroke-width:2px,color:#fff
classDef pink fill:#eb3dd6,stroke:#000,stroke-width:2px,color:#fff
classDef orange fill:#fc822b,stroke:#000,stroke-width:2px,color:#fff
classDef red fill:#ed2633,stroke:#000,stroke-width:2px,color:#fff
classDef green fill:#16b522,stroke:#000,stroke-width:2px,color:#fff

%% CONTENTS %%
  id1("ë¦¬ëˆ…ìŠ¤ OS (Ubuntu)"):::orange--ì§ì ‘êµ¬ë™-.-ROS;
  id1("ë¦¬ëˆ…ìŠ¤ OS (Ubuntu)"):::orange--ì§ì ‘êµ¬ë™-.-Gazebo;
</div>


<div class="mermaid" style="text-align:center;"> 
%% GRAPH TYPE %%
graph LR;

%% Colors %% 
classDef blue fill:#2374f7,stroke:#000,stroke-width:2px,color:#fff
classDef pink fill:#eb3dd6,stroke:#000,stroke-width:2px,color:#fff
classDef orange fill:#fc822b,stroke:#000,stroke-width:2px,color:#fff
classDef red fill:#ed2633,stroke:#000,stroke-width:2px,color:#fff
classDef green fill:#16b522,stroke:#000,stroke-width:2px,color:#fff

%% CONTENTS %%
  oid1("ë¦¬ëˆ…ìŠ¤ OS (Ubuntu)"):::orange--oid1("Docker"):::blue;
  id1("Docker"):::blue-.-ROS;
  id1("Docker"):::blue-.-Gazebo;
</div>



## ì˜µì…˜ 1. Ubuntuì— ì§ì ‘ì„¤ì¹˜

### ROS ì„¤ì¹˜

Ubuntu 22.04 (ë³„ì¹­ Ubuntu Jammy)ì˜ ê²½ìš° ROS 2 Humble Hawksbillì˜  Debian Packages (ì•„ì´í°ì˜ AppStoreì˜ Appê³¼ ìœ ì‚¬í•œ ê°œë…)ê°€ ìˆë‹¤.

#### UTF-8 ì§€ì› ë¡œì»¬ ì„¤ì •

ROSë¥¼ ì •ìƒì ìœ¼ë¡œ êµ¬ë™í•˜ê¸° ìœ„í•´ì„œëŠ” ì‹œìŠ¤í…œì˜ ë¡œì»¬ì´ `UTF-8`ì„ ì§€ì›í•˜ëŠ” ê²ƒìœ¼ë¡œ ì„¤ì •ë˜ì–´ì•¼ í•œë‹¤. ì¢…ì¢… ë¡œì»¬ì´ 'POSTIX'ë¡œ ë˜ì–´ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ `UTF-8`ì„ ì§€ì›í•˜ëŠ” ê²ƒìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. í„°ë¯¸ë„ì—ì„œ `locale` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ í–ˆì„ ë•Œ, `UTF-8`ì´ ì„ì¸ ì¶œë ¥ê°’ì„ ì–»ëŠ”ë‹¤ë©´ ì˜ ì„¤ì •ë˜ì–´ ìˆëŠ” ê²ƒì´ë‹¤. ê·¸ë ‡ì§€ ì•Šë‹¤ê±°ë‚˜ ë˜ëŠ” ì˜ ëª¨ë¥´ê² ë‹¤ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•œë‹¤.

```bash
locale  # check for UTF-8

sudo apt update && sudo apt install locales
sudo locale-gen en_US en_US.UTF-8
sudo update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8
export LANG=en_US.UTF-8

locale  # verify settings
```

#### ì†ŒìŠ¤ì½”ë“œ ì„¤ì •

UbuntuëŠ” apt(AppStoreì™€ ìœ ì‚¬í•œ ê°œë…, í”„ë¡œê·¸ë¨ì„ ì„¤ì¹˜í•˜ëŠ” í”„ë¡œê·¸ë¨)ì„ ì´ìš©í•´ í”„ë¡œê·¸ë¨ì„ ì„¤ì¹˜í•˜ê³ , aptëŠ” Repositoryë¼ê³  í•˜ëŠ” í”„ë¡œê·¸ë¨ ì„œë²„ì— ì ‘ê·¼í•´ í”„ë¡œê·¸ë¨ì„ ì°¾ì•„ ë‹¤ìš´ë°›ëŠ”ë‹¤.

ROSë¥¼ ì„¤ì¹˜í•˜ê¸° ìœ„í•´ ROS2ì˜ Repositoryë¥¼ ì‹œìŠ¤í…œì— ì¶”ê°€í•œë‹¤. ì´ë•Œ, ë¨¼ì € [Ubuntu Universe repositoy](https://help.ubuntu.com/community/Repositories/Ubuntu)ë¥¼ í™œì„±í™”í•œë‹¤.

```bash
sudo apt install software-properties-common
sudo add-apt-repository universe
```

ê·¸ë¦¬ê³  ë¨¼ì € aptê°€ ROS2 Repositoryì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ROS 2 GPG keyë¥¼ aptì— ë“±ë¡í•œë‹¤.

```bash
sudo apt update && sudo apt install curl
sudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg
```

ê·¸ë¦¬ê³  ROS2ì˜ Repositoryë¥¼ aptì˜ ì†ŒìŠ¤ë¦¬ìŠ¤íŠ¸ì— ë“±ë¡í•œë‹¤.

```bash
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(. /etc/os-release && echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null
```

#### ROS 2 íŒ¨í‚¤ì§€ ì„¤ì¹˜

aptì˜ Repository ìºì‹œë¥¼ ì—…ë°ì´íŠ¸í•´ ìµœì‹  í”„ë¡œê·¸ë¨ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¨ë‹¤.

```bash
sudo apt update
```

ROS 2 íŒ¨í‚¤ì§€ëŠ” Ubuntu ì‹œìŠ¤í…œê³¼ í•¨ê»˜ ìì£¼ ì—…ë°ì´íŠ¸ ëœë‹¤. í•­ìƒ ìµœì‹  Ubuntu ìœ„ì— ROSê°€ ì„¤ì¹˜ë  ìˆ˜ ìˆë„ë¡ ë¨¼ì € Ubuntuë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤.

```bash
sudo apt upgrade
```

ROS Desktopë²„ì „(ì¶”ì²œ)ì„ ì„¤ì¹˜í•œë‹¤. ì—¬ê¸°ì—ëŠ” ROS, RViz, ë°ëª¨, íŠœí† ë¦¬ì–¼ì´ í¬í•¨ë˜ì–´ ìˆë‹¤.

```bash
sudo apt install ros-humble-desktop
```

ROS Baseë²„ì „(ê¹¡í†µë²„ì „)ì„ ì„¤ì¹˜í•œë‹¤. ì—¬ê¸°ì—ëŠ” í†µì‹ ë¼ì´ë¸ŒëŸ¬ë¦¬, ë©”ì‹œì§€ íŒ¨í‚¤ì§€, í„°ë¯¸ë„ í”„ë¡œê·¸ë¨ ë“±ì´ í¬í•¨ë˜ì–´ ìˆìœ¼ë©° GUI í”„ë¡œê·¸ë¨ë“¤ìœ¼ ã„´í¬í•¨ë˜ì–´ ìˆì§€ ì•Šë‹¤.

```bash
sudo apt install ros-humble-ros-base
```

ê°œë°œì íˆ´ë“¤ ì„¤ì¹˜í•œë‹¤. ì—¬ê¸°ì—ëŠ” ROS íŒ¨í‚¤ì§€ë¥¼ ë¹Œë“œí•˜ê¸° ìœ„í•œ ì»´íŒŒì¼ëŸ¬ì™€ ìœ í‹¸ë¦¬í‹° ë“±ì´ í¬í•¨ë˜ì–´ ìˆë‹¤.

```bash
sudo apt install ros-dev-tools
```

#### ì„¤ì¹˜ í›„ í™˜ê²½ì„¤ì •

ROS í™˜ê²½ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•œë‹¤. ì´ë¡œì¨ ROS í”„ë¡œê·¸ë¨ì„ ì–´ë””ì„œë“  ì‹¤í–‰ ê°€ëŠ¥í•˜ê²Œ ëœë‹¤.

```bash
source /opt/ros/humble/setup.bash
```

#### ROS ì„¤ì¹˜ í…ŒìŠ¤íŠ¸

ìœ„ì—ì„œ `ros-humble-desktop` (Desktopë²„ì „)ì„ ì„¤ì¹˜í–ˆë‹¤ë©´ ì•„ë˜ ì˜ˆì‹œë¥¼ ì‹¤í–‰í•´ ë³¼ ìˆ˜ ìˆë‹¤.

í„°ë¯¸ë„ ì°½ì—ì„œ C++ë¡œ ì‘ì„±ëœ `talker` í”„ë¡œê·¸ë¨ì„ êµ¬ë™í•œë‹¤. `talker` í”„ë¡œê·¸ë¨ì€ ë©”ì‹œì§€(`Hello World`)ë¥¼ Publishí•œë‹¤.

```bash
source /opt/ros/humble/setup.bash
ros2 run demo_nodes_cpp talker
```

**ìƒˆë¡œìš´ í„°ë¯¸ë„ ì°½**ì—ì„œ Pythonìœ¼ë¡œ ì‘ì„±ëœ `listener` í”„ë¡œê·¸ë¨ì„ êµ¬ë™í•œë‹¤. `listener` í”„ë¡œê·¸ë¨ì€ `talker`ì˜ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ê³  `I heard`ë¼ê³  ëŒ€ë‹µí•˜ë©° ë“¤ì€ ë©”ì‹œì§€ë¥¼ í”„ë¦°íŠ¸í•œë‹¤.

```bash
source /opt/ros/humble/setup.bash
ros2 run demo_nodes_py listener
```

#### ROSë¥¼ ì–´ë””ì„œë“  ì‹¤í–‰ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •

ìœ„ì˜ ROS ì„¤ì¹˜ í…ŒìŠ¤íŠ¸ì—ì„œ ë§¤ë²ˆ ìƒˆë¡œìš´ í„°ë¯¸ë„ ì°½ì—ì„œ `source /opt/ros/humble/setup.bash`ë¥¼ ì‹¤í–‰í•´ ROS í™˜ê²½ì„ ì„¤ì •í•´ ì£¼ì–´ì•¼ í•œë‹¤. ì´ëŸ¬í•œ ë²ˆê±°ë¡œì›€ì„ íšŒí”¼í•˜ê¸° ìœ„í•´ ìƒˆë¡œìš´ í„°ë¯¸ë„ ì°½ì´ ì—´ë¦´ë•Œ ë§¤ë²ˆ ì‹¤í–‰ë˜ëŠ” `~/.bashrc` íŒŒì¼ì— ì¶”ê°€í•œë‹¤.

```bash
echo "" >> ~/.bashrc
echo "# ROS Set-up Script" >> ~/.bashrc
echo "source /opt/ros/humble/setup.bash" >> ~/.bashrc
```

### Gazebo Fortress ì„¤ì¹˜

í˜„ì¬ Gazebo ìµœì‹  LTS(ì¥ê¸°ì§€ì› ë²„ì „)ì€ 2021ë…„ ì¶œì‹œí•œ Gazebo Fortressë¡œ 2026ë…„ 9ì›”ê¹Œì§€ ì§€ì›ë  ì˜ˆì •ì´ë‹¤. ëª©ì ì— ë”°ë¼ ë‘ê°€ì§€ ì„¤ì¹˜ë°©ë²•ì´ ìˆë‹¤.

- <span style="color: #9645FF">**ROS/Gazebo ì„¤ì¹˜ë°©ë²•**</span>
  - **[ë°”ì´ë„ˆë¦¬ ì„¤ì¹˜](#ë°”ì´ë„ˆë¦¬-ì„¤ì¹˜ë°©ë²•) : ë°”ì´ë„ˆë¦¬(ì‹¤í–‰íŒŒì¼)ì„ ì„¤ì¹˜í•´ ê¸° ê°œë°œëœ í”„ë¡œê·¸ë¨ì˜ êµ¬ë™ë§Œì„ ëª©ì ìœ¼ë¡œ í•˜ëŠ” ì„¤ì¹˜ë°©ë²•**
  - **[ì†ŒìŠ¤ì½”ë“œ ì„¤ì¹˜](#ì†ŒìŠ¤ì½”ë“œ-ì„¤ì¹˜ë°©ë²•) : ë¬¼ë¦¬ì—”ì§„, ì„¼ì„œ ë“±ì„ ê°œë°œí•˜ê³  êµ¬ë™, ë˜ëŠ” ê¸°ì¡´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê¸° ìœ„í•œ ì„¤ì¹˜ë°©ë²•**

#### ë°”ì´ë„ˆë¦¬ ì„¤ì¹˜ë°©ë²•

Fortressì˜ ë°”ì´ë„ˆë¦¬ëŠ” osrfoundationì˜ repositoryì— ë“±ë¡ë˜ì–´ ì œê³µë˜ê³  ìˆìœ¼ë©°, `ignition-fortress` íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ë©´ ëœë‹¤.

ë¨¼ì € repositoryë¥¼ ì—…ë°ì´íŠ¸ í•˜ê³  ë°”ì´ë„ˆë¦¬ ì„¤ì¹˜ì— í•„ìš”í•œ íŒ¨í‚¤ì§€ë“¤ì„ ì„¤ì¹˜í•œë‹¤.

```bash
sudo apt-get update
sudo apt-get install lsb-release wget gnupg
```

ê·¸ë¦¬ê³  Gazebo Fortressë¥¼ ì„¤ì¹˜í•œë‹¤.

```bash
sudo wget https://packages.osrfoundation.org/gazebo.gpg -O /usr/share/keyrings/pkgs-osrf-archive-keyring.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg] http://packages.osrfoundation.org/gazebo/ubuntu-stable $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/gazebo-stable.list > /dev/null
sudo apt-get update
sudo apt-get install ignition-fortress
```

- <span style="color: #9645FF">**ê·¸ë˜í”½ì¹´ë“œ ì„¤ì •**</span>
  - ë¨¼ì € ì•„ë˜ `glxgears` í”„ë¡œê·¸ë¨ì„ êµ¬ë™í•´ ì„¸ê°œì˜ ê¸°ì–´ê°€ ëŒì•„ê°€ëŠ” í™”ë©´ì´ ì˜ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸í•œë‹¤. ë§Œì•½ ë¬¸ì œê°€ ìˆë‹¤ë©´ ë‹¤ìŒì˜ ë°©ë²•ì„ ì ìš©í•´ ë³¸ë‹¤.
  
  - ë‚´ì¥ê·¸ë˜í”½ì„ ì‚¬ìš©í•  ê²½ìš°, ì•„ë˜ ì½”ë“œë¥¼ ì‹¤í–‰í•  í•„ìš”ê°€ ìˆë‹¤.
    ```bash
    export LIBGL_ALWAYS_SOFTWARE=1
    echo "" >> ~/.bashrc
    echo "# Software GPU acceleration" >> ~/.bashrc
    echo "export LIBGL_ALWAYS_SOFTWARE=1" >> ~/.bashrc
    ```

  - ê·¸ë˜í”½ì¹´ë“œ ì„¤ì •ì´ ì˜ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ `glxgears` í”„ë¡œê·¸ë¨ì„ êµ¬ë™í•´ ì„¸ê°œì˜ ê¸°ì–´ê°€ ëŒì•„ê°€ëŠ” í™”ë©´ì´ ì˜ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸í•œë‹¤.
  
    ```bash
    # glxgears ê°€ í¬í•¨ëœ íŒ¨í‚¤ì§€ ì„¤ì¹˜
    sudo apt install -y mesa-utils
    # glxgears ì‹¤í–‰
    glxgears
    ```
  
  - ì™¸ì¥ê·¸ë˜í”½ì—ì„œ `glxgears` ê°€ ì˜¬ë°”ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ë‹¤ìŒ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ ë³¸ë‹¤

    ```bash
    # WSL íŠ¹í™” mesa íŒ¨í‚¤ì§€ ì„¤ì¹˜
    sudo add-apt-repository ppa:kisak/kisak-mesa
    sudo apt-get update && sudo apt dist-upgrade
    # ì™¸ì¥ GPUê°€ ì˜¬ë°”ë¡œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ ì¶œë ¥ê°’ì— ì™¸ì¥ GPUì´ë¦„ì´ ì¡íˆëŠ”ì§€ í™•ì¸
    glxinfo | grep OpenGL
    # glxgears ì‹¤í–‰
    glxgears
    ```

ìœ„ ëª…ë ¹ì–´ë¥¼ í†µí•´ í•„ìš”í•œ ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ì‹¤í–‰íŒŒì¼ë“¤ì´ ì„¤ì¹˜ë˜ë©° `ign gazebo`ë¡œ Gazeboë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆìœ¼ë©´ [íŠœí† ë¦¬ì–¼ ì˜ˆì œ](#íŠœí† ë¦¬ì–¼-ì˜ˆì œ-ì‹¤í–‰)ë¥¼ ì‹¤í–‰í•´ ë³¸ë‹¤.


#### ì†ŒìŠ¤ì½”ë“œ ì„¤ì¹˜ë°©ë²•

ì†ŒìŠ¤ì½”ë“œë¥¼ ë‹¤ìš´ë°›ì•„ ì„¤ì¹˜í•˜ë©´ Gazeboë¥¼ ì»´íŒŒì¼í•˜ê¸° ìœ„í•œ ê°œë°œí™˜ê²½ì´ ê°™ì´ êµ¬ì„±ë˜ë¯€ë¡œ ìƒˆë¡œìš´ ë¬¼ë¦¬ì—”ì§„ì´ë‚˜ ì„¼ì„œ ë“±ì„ ê°œë°œí•˜ê³  êµ¬ì„±í•´ í•¨ê»˜ êµ¬ë™í•˜ê±°ë‚˜ ê¸°ì¡´ ì½”ë“œë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.

ì œì¼ ê°„ë‹¨í•œ ì„¤ì¹˜ë°©ë²•ì€ [vcstool](https://github.com/dirk-thomas/vcstool)ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë©° ëª¨ë“  í•„ìš” ê°œë°œì ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ê³¼ Gazeboë¥¼ ì˜¤ë¥˜ì—†ì´ ì„¤ì¹˜í•˜ëŠ”ë° [colcon](https://colcon.readthedocs.io/en/released/)ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ëª‡ëª‡ íˆ´ë“¤ì€ Python 3.5 ì´ìƒì˜ í™˜ê²½ì„ í•„ìš”ë¡œ í•œë‹¤.

##### Ubuntu ê¸°ë³¸ ê°œë°œì íˆ´ ì„¤ì¹˜

Ubuntuì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ê°œë°œì íˆ´ë“¤ì„ ì„¤ì¹˜í•œë‹¤.

```bash
sudo apt install python3-pip wget lsb-release gnupg curl git
```

#### í•„ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

ë‹¤ìš´ë°›ì€ ì†ŒìŠ¤ì½”ë“œë¥¼ ë‹¤ìš´ë°›ê³  ì»´íŒŒì¼í•˜ê¸° ì „ì— í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ë¨¼ì € ì„¤ì¹˜í•œë‹¤. `apt`ì˜ repository ëª©ë¡ì— osrfoundationì˜ repositoryë¥¼ ì¶”ê°€í•œë‹¤.

```bash
sudo wget https://packages.osrfoundation.org/gazebo.gpg -O /usr/share/keyrings/pkgs-osrf-archive-keyring.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg] http://packages.osrfoundation.org/gazebo/ubuntu-stable $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/gazebo-stable.list > /dev/null
sudo apt-get update
```

ê·¸ë¦¬ê³  ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ ëª¨ë“  í•„ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì„¤ì¹˜í•œë‹¤.

```bash
sudo apt -y install \
  $(sort -u $(find . -iname 'packages-'`lsb_release -cs`'.apt' -o -iname 'packages.apt' | grep -v '/\.git/') | sed '/ignition\|sdf/d' | tr '\n' ' ')
```

##### vcstoolê³¼ colcon ì„¤ì¹˜

Pythonì˜ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì¸ `pip`ì„ ì´ìš©í•´ `vcstool`ê³¼ `colcon`ì„ ì„¤ì¹˜í•œë‹¤.

```bash
# Local ê³„ì •ì˜ pip ì„¤ì¹˜ê²½ë¡œë¥¼ PATHì— ì¶”ê°€
export PATH=$PATH:$HOME/.local/bin/
echo "" >> ~/.bashrc
echo "# Path settings for local pip installations" >> ~/.bashrc
echo "export PATH=$PATH:$HOME/.local/bin/" >> ~/.bashrc
# vcstool ì„¤ì¹˜
pip install vcstool
# colcon ì„¤ì¹˜
pip install -U colcon-common-extensions
```

#### ì†ŒìŠ¤ì½”ë“œ ë‹¤ìš´ë¡œë“œ

ë¨¼ì € `vcstool`ê³¼ `colcon`ì„ ì´ìš©í•´ ì†ŒìŠ¤ì½”ë“œë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ì»´íŒŒì¼ í•  ê°œë°œì workspace ê³µê°„ì„ ë§Œë“ ë‹¤. workspace ëŒ€ì‹  ë‹¤ë¥¸ ì´ë¦„ì„ ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤.

```bash
# ë¡œì»¬ê³„ì • home í´ë”ì— workspace/src í´ë” ìƒì„±
mkdir -p ~/workspace/src
cd ~/workspace/src
```

Gazebo Fortressë¥¼ ì„¤ì¹˜í•˜ê¸° ìœ„í•´ í•„ìš”í•œ íŒŒì¼ì€ `collection-fortress.yaml` íŒŒì¼ ì•ˆì— ëª¨ë‘ ì •ë¦¬ë˜ì–´ ìˆë‹¤. ì´ íŒŒì¼ì„ workspace ê³µê°„ì— ë‹¤ìš´ë°›ëŠ”ë‹¤.

```bash
wget https://raw.githubusercontent.com/ignition-tooling/gazebodistro/master/collection-fortress.yaml
```

ì´ì œ `vcstool`ì„ ì´ìš©í•´ yamlíŒŒì¼ ì•ˆì— ì í˜€ìˆëŠ” ëª¨ë“  ì†ŒìŠ¤ì½”ë“œë“¤ì„ ë‹¤ìš´ë°›ëŠ”ë‹¤.

```bash
vcs import < collection-fortress.yaml
```

#### Gazebo ë¼ì´ë¸ŒëŸ¬ë¦¬ ì»´íŒŒì¼

ì´ì œ `colcon`ì„ ì´ìš©í•´ Gazebo ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì»´íŒŒì¼í•œë‹¤. ë¨¼ì € workspace í´ë”ë¡œ ì´ë™í•œë‹¤.

```bash
cd ~/workspace
```

colconì„ ì´ìš©í•œ ì»´íŒŒì¼ ëª…ë ¹ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì˜µì…˜ì´ ìˆë‹¤.

- ì¼ë°˜ ì»´íŒŒì¼
  
  ```bash
  colcon build --merge-install
  ```

- ê³ ì† ì»´íŒŒì¼
  - ì»´íŒŒì¼ í…ŒìŠ¤íŠ¸ë¥¼ ìŠ¤í‚µí•´ ì»´íŒŒì¼ ì†ë„ ì¦ê°€
  
  ```bash
  colcon build --cmake-args -DBUILD_TESTING=OFF --merge-install
  ```

- ë””ë²„ê¹… ì»´íŒŒì¼
  - ì»´íŒŒì¼ ì†ë„ëŠ” ëŠë ¤ì§€ë‚˜ ë¬¸ì œ ë°œìƒ ì‹œ ë””ë²„ê¹… ê°€ëŠ¥
  - GDBë¥¼ ì´ìš©í•´ ì»´íŒŒì¼ ì¤‘ ë¬¸ì œ í™•ì¸ ê°€ëŠ¥
  
  ```bash
  colcon build --cmake-args -DBUILD_TESTING=OFF --merge-install
  ```

- íŠ¹ì • ë¼ì´ë¸ŒëŸ¬ë¦¬ íŒ¨í‚¤ì§€ë§Œ ì»´íŒŒì¼
  - ê°œë°œí•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë˜ëŠ” ë¬¸ì œê°€ ëœ íŠ¹ì • íŒ¨í‚¤ì§€ë§Œ ì»´íŒŒì¼
  - ëª…ë ¹ì–´ ë§ˆì§€ë§‰ì˜ `PACKAGE_NAME`ì— ì›í•˜ëŠ” íŒ¨í‚¤ì§€ ì´ë¦„ì„ ëŒ€ì…
  - ì—°ê´€ëœ ì¢…ì† ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ í•¨ê»˜ ì»´íŒŒì¼ í•˜ëŠ” ê²½ìš°
  
    ```bash
    colcon build --merge-install --packages-up-to PACKAGE_NAME
    ```
  
  - ì¢…ì† ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì€ ë¬´ì‹œí•˜ê³  í•´ë‹¹ íŒ¨í‚¤ì§€ë§Œ ì»´íŒŒì¼ í•˜ëŠ” ê²½ìš°

    ```bash
    colcon build --packages-select PACKAGE_NAME
    ```

#### Workspace í™œì„±í™”

ëª¨ë“  ì»´íŒŒì¼ëœ ì‹¤í–‰ ê°€ëŠ¥í•œ í”„ë¡œê·¸ë¨ë“¤ì€ `~/workspace/install` í´ë” ì•ˆì— ì €ì¥ëœë‹¤. í•´ë‹¹ í”„ë¡œê·¸ë¨ë“¤ì„ ì˜¬ë°”ë¥´ê²Œ ì‹¤í–‰í•˜ë ¤ë©´ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ í•´ë‹¹ workspaceë¥¼ í™œì„±í™”í•œë‹¤.

```bash
source ~/workspace/install/setup.bash
```

ìœ„ ëª…ë ¹ì–´ëŠ” ìƒˆë¡œìš´ í„°ë¯¸ë„ ì°½ì—ì„œ ë§¤ë²ˆ ì…ë ¥í•´ í™œì„±í™” í•´ì•¼ í•œë‹¤. ì—¬ëŸ¬ê°œì˜ workspaceë¥¼ ì´ìš©í•  ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´, ìœ„ ëª…ë ¹ì–´ë¥¼ `~/.bashrc`ì— ë“±ë¡í•´ ìƒˆë¡œìš´ í„°ë¯¸ë„ ì°½ì´ ì‹¤í–‰ ë  ë•Œ ìë™ìœ¼ë¡œ í™œì„±í™”ë˜ë„ë¡ í•œë‹¤.

```bash
echo "" >> ~/.bashrc
echo "# Automatic set-up of the Gazebo in ~/workspace" >> ~/.bashrc
echo "source ~/workspace/install/setup.bash" >> ~/.bashrc
```

ì´ì œ `ign gazebo`ë¡œ Gazeboë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆìœ¼ë©´ [íŠœí† ë¦¬ì–¼ ì˜ˆì œ](#íŠœí† ë¦¬ì–¼-ì˜ˆì œ-ì‹¤í–‰)ë¥¼ ì‹¤í–‰í•´ ë³¸ë‹¤.

#### íŠœí† ë¦¬ì–¼ ì˜ˆì œ ì‹¤í–‰

Gazeboë¥¼ ì„¤ì¹˜í•œ í›„ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ 3D ë¡œë´‡ ì‹œë®¬ë ˆì´í„°ë¥¼ ì‹¤í–‰í•˜ê³  í•¨ê»˜ ì„¤ì¹˜ëœ `shapes.sdf` í™˜ê²½ì„ ë¶ˆëŸ¬ì˜¨ë‹¤.

```bash
ign gazebo shapes.sdf
```

ìœ„ ëª…ë ¹ì–´ë¥¼ í†µí•´ Gazeboê°€ êµ¬ë™ë˜ëŠ” ì„œë²„(`Gazebo Server`)ì™€ Gazebo í™”ë©´(`Gazebo GUI`) ì°½ì„ ì‹¤í–‰í•˜ë©° 5ê°œì˜ ë‹¨ìˆœí•œ 3ì°¨ì› ë¬¼ì²´ë“¤ì´ ë†“ì—¬ì§„ í™˜ê²½ì„ ë³¼ ìˆ˜ ìˆë‹¤.

ì‹¤í–‰ ì‹œ Gazebo ë‚´ë¶€ ë©”ì‹œì§€ ë“¤ì„ í™•ì¸í•˜ë ¤ë©´ `-v 4` ëª…ë ¹ì–´ë¥¼ ì¶”ê°€í•´ ì‹¤í–‰ì‹œí‚¨ë‹¤. ì´ë•Œ ìˆ«ì `-v` ì´í›„ì˜ ìˆ«ìëŠ” ì¶œë ¥í•  ë©”ì‹œì§€ ë²”ìœ„ë¥¼ ë‚˜íƒ€ë‚´ë©°, ìˆœì„œëŒ€ë¡œ ì—ëŸ¬(error), ì£¼ì˜(warning), ì •ë³´(informational), ë””ë²„ê¹…(debugging) ë©”ì‹œì§€ë¥¼ ì˜ë¯¸í•˜ê³  1ë¶€í„° 4ê¹Œì§€ ì„ íƒ ê°€ëŠ¥í•˜ë‹¤.

```bash
ign gazebo shapes.sdf -v 4
```

ë˜, GUI ì°½ ì—†ì´ headless ëª¨ë“œ(`Gazebo Server`ë§Œ ì‹¤í–‰)ë¡œ ì‹¤í–‰í•˜ë ¤ë©´ `-s` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•œë‹¤.

```bash
ign gazebo -s -v 4 shapes.sdf
```

## ì˜µì…˜ 2. Dockerë¡œ ì„¤ì¹˜

Dockerë¥¼ ì´ìš©í•˜ë©´ ì•„ì£¼ ê°„ë‹¨íˆ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ì„¤ì¹˜í•˜ëŠ” ROSì™€ Gazeboì˜ ë²„ì „ì˜ ì„ íƒì´ ì œí•œëœë‹¤.

Dockerì— ëŒ€í•œ ì„¤ëª…ê³¼ ê¸°ì´ˆí•™ìŠµì€ [Docker í•™ìŠµ]({% post_url 2099-01-01-Aux %}#docker)ì— ìˆë‹¤.

### Dockerì„¤ì¹˜

```bash
sudo apt-get remove docker docker-engine docker.io containerd runc
sudo apt-get update
sudo apt-get install \
    ca-certificates \
    curl \
    gnupg \
    lsb-release
sudo mkdir -m 0755 -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
sudo groupadd docker
sudo usermod -aG docker $USER
newgrp docker
docker run hello-world
```

ì œì¼ ë§ˆì§€ë§‰ ëª…ë ¹ì–´ë¡œ `hello-world` ê°€ ë³´ì¸ë‹¤ë©´ Dockerì„¤ì¹˜ ì„±ê³µì´ë‹¤. ì´ì œ ì•„ë˜ ëª…ë ¹ì–´ë¡œ ROSì™€ Gazeboê°€ ì„¤ì¹˜ëœ ì´ë¯¸ì§€ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. ì´ë•Œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ëŠ” í´ë”ë¥¼ ë§ˆìš´íŠ¸í•˜ë¯€ë¡œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” ìœ„ì¹˜ì— ì£¼ì˜í•´ì•¼ í•œë‹¤.

```
docker run --privileged --mac-address 00:15:5d:47:9c:d9 -v "/tmp/.X11-unix:/tmp/.X11-unix" -e DISPLAY=${DISPLAY} -it --rm -v $PWD:/home/user/workdir -w /home/user/workdir woensugchoi
/ros-gazebo:generic_x86_64 "/bin/bash"
```

## Mac OSì— ì„¤ì¹˜ 

<span style="color: #9645FF">**Mac OSì— ì„¤ì¹˜ë°©ë²• ë¯¸ì™„ì„±!!**</span>
<span style="color: #9645FF">**Mac OSì— ì„¤ì¹˜ë°©ë²• ë¯¸ì™„ì„±!!**</span>
- Faster Ubuntu VM with ARM64 (need to test GUI performance)
  - multipass
    - https://medium.com/@paulrobu/how-to-run-ubuntu-22-04-vms-on-apple-m1-arm-based-systems-for-free-c8283fb38309
  - lima
    - https://github.com/lima-vm/lima
  - Various Liinux VM comparisons including lima
    - https://levelup.gitconnected.com/running-amd64-linux-on-apple-m1-with-qemu-utm-64d67cccd6f8
- Virtual install on Mac OS VM
  - https://github.com/insidegui/VirtualBuddy
  - https://gazebosim.org/docs/garden

<span style="color: #9645FF">**Mac OSì— ì„¤ì¹˜ë°©ë²• ë¯¸ì™„ì„±!!**</span>
<span style="color: #9645FF">**Mac OSì— ì„¤ì¹˜ë°©ë²• ë¯¸ì™„ì„±!!**</span>

- <span style="color: #9645FF">**Mac OS êµ¬ì„±ë°©ë²•**</span>
  - [**[ğŸ˜ ì¶”ì²œ!] ARM64 ì•„í‚¤í…ì³ Ubuntuë¥¼ Limaë¡œ êµ¬ë™**](#ARM64-Ubuntu-Lima-êµ¬ë™)
  - [**ARM64 ì•„í‚¤í…ì³ Ubuntuë¥¼ Dockerë¡œ êµ¬ë™**](#ARM64-Ubuntu-Docker-êµ¬ë™)
  - [**X86_64 ì•„í‚¤í…ì³ Ubuntuë¥¼ Podmanìœ¼ë¡œ êµ¬ë™**](#X86ï¼¿64ãƒ¼Ubuntu-Podman-êµ¬ë™)

### ARM64 Ubuntu Lima êµ¬ë™

Mac OS XëŠ” ë¦¬ëˆ…ìŠ¤ í™˜ê²½ê³¼ ìœ ì‚¬í•˜ë‚˜ ì• í”Œì˜ ì „ìš© ì• í”Œ ì‹¤ë¦¬ì½˜ (M1 ì¹© ì´í›„) ì ìš© ì´í›„ ê¸°ì¡´ì˜ ì¸í…” ê¸°ë°˜ ì»´í“¨í„°ë“¤(X86_64 ì•„í‚¤í…ì³)ê³¼ ë‹¤ë¥¸ CPU ì•„í‚¤í…ì³ê°€ ë˜ì—ˆë‹¤. ì´ëŠ” ë¼ì¦ˆë² ë¦¬ íŒŒì´ë‚˜ ì•ˆë“œë¡œì´ë“œì™€ ìœ ì‚¬í•œ ARM64 ì•„í‚¤í…ì³ì„ ì´ìš©í•˜ì—¬ ì „ë ¥ë¹„ë¥¼ ê·¹ëŒ€í™”í•˜ëŠ” ë°©ë²•ì— í•´ë‹¹í•œë‹¤.

[Lima](https://github.com/lima-vm/lima)ëŠ” í˜„ì¬ë„ í™œë°œíˆ ê°œë°œë˜ê³  ìˆëŠ” íŒ¨í‚¤ì§€ë¡œ ìœˆë„ìš°ì˜ WSLê³¼ ë§¤ìš° ìœ ì‚¬í•œ ê°œë°œí™˜ê²½ì„ ì œê³µí•œë‹¤. ì•„ì§ Waylandë¥¼ ì´ìš©í•œ ì§ì ‘ì  GUIêµ¬ë™ì€ ì œê³µë˜ì§€ ì•Šìœ¼ë‚˜, ì´ë¶€ë¶„ì€ ì›ê²©ë°í¬íŠ¸í†± ì ‘ì†ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

- Limaë¥¼ ì´ìš©í•´ Ubuntu 22.04ã€€ì„¤ì¹˜
  
  ```bash
  # Install brew package manger
  /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
  # Install Lima with brew
  brew install lima
  # Set Virtual Machine ubuntu 22.04 (ARM64 Arch)
  limactl start --name=ubuntu-22.04 https://raw.githubusercontent.com/lima-vm/lima/master/examples/ubuntu-lts.yaml
  # Set X86_64 Virtual Machine with Rosetta2
  limactl start --name=ubuntu-x86_64 https://raw.githubusercontent.com/lima-vm/lima/master/examples/experimental/vz.yaml
  ```

- Run Lima and set password
  
  ```bash
  # Find out default username
  whoami
  limactl shell ubuntu-22.04
  sudo passwd $(whoami)
  # Add user to sudo and GUI group
  sudo usermod -a -G sudo $(whoami)
  sudo usermod -a -G adm $(whoami)
  ```

- Install GUI Desktop and XRDP
  
  ```bash
  sudo apt update && sudo apt -y upgrade
  # Keep current ssh config when asked
  sudo apt install -y ubuntu-desktop xrdp
  sudo systemctl start xrdp
  # Now collect with RDP client to localhost
  ```

- ì›ê²© ë°ìŠ¤í¬íƒ‘ ì–´í”Œë¡œ `localhost`ã€€ì•„ì´í”¼ì£¼ì†Œì— ì ‘ì†. ì´ë•Œ ì‚¬ìš©ìëª…ì€ Mac OS í„°ë¯¸ë„ì˜ ì‚¬ìš©ìëª…ê³¼ ê°™ê³  (Lima ë‚´ì—ì„œ `whoami`ã€€ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œë„ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤) ë¹„ë°€ë²ˆí˜¸ëŠ” ì•ì„œ ì„¤ì •í•œ ê°’ê³¼ ê°™ë‹¤. ì ‘ì† ì‹œ Administratorì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë¬»ëŠ”ë° ì·¨ì†Œë¡œ ë¬´ì‹œí•´ì£¼ë©´ ëœë‹¤.

- ê´€ë ¨í•´ ì¶”ê°€ ì—°êµ¬ê°€ í•„ìš”í•œ ë‚´ìš©
  - Wayland ported Owl : [https://github.com/lima-vm/lima/issues/2](https://github.com/lima-vm/lima/issues/2)
  - WSLgì™€ ê°™ì´ Waylandë¥¼ ì§ì ‘ ì´ìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ limaì˜ Issue ë²ˆí˜¸ 2ë²ˆìœ¼ë¡œ ì´ˆê¸°ë¶€í„° ë…¼ì˜ë˜ì–´ì™”ìœ¼ë‚˜ ì•„ì§ ë§Œë“¤ì–´ì§€ì§€ ì•ŠìŒ

### ARM64 Ubuntu Docker êµ¬ë™

Mac OS XëŠ” ë¦¬ëˆ…ìŠ¤ í™˜ê²½ê³¼ ìœ ì‚¬í•˜ë‚˜ ì• í”Œì˜ ì „ìš© ì• í”Œ ì‹¤ë¦¬ì½˜ (M1 ì¹© ì´í›„) ì ìš© ì´í›„ ê¸°ì¡´ì˜ ì¸í…” ê¸°ë°˜ ì»´í“¨í„°ë“¤(X86_64 ì•„í‚¤í…ì³)ê³¼ ë‹¤ë¥¸ CPU ì•„í‚¤í…ì³ê°€ ë˜ì—ˆë‹¤. ì´ëŠ” ë¼ì¦ˆë² ë¦¬ íŒŒì´ë‚˜ ì•ˆë“œë¡œì´ë“œì™€ ìœ ì‚¬í•œ ARM64 ì•„í‚¤í…ì³ì„ ì´ìš©í•˜ì—¬ ì „ë ¥ë¹„ë¥¼ ê·¹ëŒ€í™”í•˜ëŠ” ë°©ë²•ì— í•´ë‹¹í•œë‹¤.

ë”°ë¼ì„œ Mac OSì— ì„¤ì¹˜í•˜ê¸° ìœ„í•´ì„œëŠ”, ROS, Gazeboã€€ëª¨ë‘ ì†ŒìŠ¤ì½”ë“œë¡œë¶€í„° ì»´íŒŒì¼ í•´ì•¼í•˜ë‚˜ ë§¥ì— ëŒ€í•œ ì§€ì›ì´ í•­ìƒ ë’¤ì³ì§€ê³  ìˆì–´ ë§Œì•½ ìµœì‹  ë²„ì „ì˜ OS (ë³´í†µ ëª¨ë‘ ìµœì‹ ë²„ì „ì„ ì‚¬ìš©í•œë‹¤)ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ ì„¤ì¹˜ê°€ ë§¤ìš° ë³µì¡í•´ì§„ë‹¤. ë”°ë¼ì„œ, Dockerë¥¼ ì´ìš©í•´ ARM64 ì•„í‚¤í…ì³ì˜ Ubuntuë¥¼ êµ¬ë™ì‹œí‚¨ í›„ ì´ Ubuntuã€€ìœ„ì— ì†ŒìŠ¤ì½”ë“œë¡œë¶€í„° ì»´íŒŒì¼ í•  í•„ìš”ê°€ ìˆë‹¤. (ë™ì¼í•œ ì•„í‚¤í…ì³ë¡œ êµ¬ë™í•œë‹¤ë©´ Macì—ì„œ Ubuntuë¥¼ êµ¬ë™í•˜ë”ë¼ë„ ì„±ëŠ¥ì†ì‹¤ì´ ë¯¸ë¯¸í•˜ë‹¤. Dockerì— ëŒ€í•œ ì„¤ëª…ê³¼ ê¸°ì´ˆí•™ìŠµì€ [Docker í•™ìŠµ]({% post_url 2099-01-01-Aux %}#docker)ì— ìˆë‹¤.) Dockerì˜ ê²½ìš° ì»´íŒŒì¼ì„ ìˆ˜í–‰í•œ ì‹œìŠ¤í…œ í™˜ê²½ì„ ì €ì¥í•´ Docker Hubë¥¼ í†µí•´ ê³µìœ í•  ìˆ˜ ìˆì–´ ì§ì ‘ ì»´íŒŒì¼ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

#### Docker ì„¤ì¹˜

- [ê³µì‹ Docker ì„¤ì¹˜ ë§í¬](https://docs.docker.com/desktop/install/mac-install/)

```bash
# Rosetta ì—…ë°ì´íŠ¸ (Dockerê³µì‹ ì„¤ì¹˜ë§¤ë‰´ì–¼ì—ì„œ ì—…ë°ì´íŠ¸ í•˜ëŠ”ê²Œ ì•ˆì „í•˜ë‹¤ê³  í•¨)
softwareupdate --install-rosetta
# Docker ë‹¤ìš´ë¡œë“œ & ì„¤ì¹˜
# ë§Œì•½ curl ë¡œ ë‹¤ìš´ë¡œë“œê°€ ì•ˆë˜ë©´ https://docs.docker.com/desktop/install/mac-install/ã€€ì—ì„œ ë‹¤ìš´ë¡œë“œ
cd ~/Downloads
curl https://desktop.docker.com/mac/main/arm64/Docker.dmg\?utm_source\=docker\&utm_medium\=webreferral\&utm_campaign\=docs-driven-download-mac-arm64 -o Docker.dmg 
sudo hdiutil attach Docker.dmg
sudo /Volumes/Docker/Docker.app/Contents/MacOS/install --accept-license
sudo hdiutil detach /Volumes/Docker
```

ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ Dockerë¥¼ í•œë²ˆ ì‹¤í–‰í•œë‹¤. (ì´ë•Œ, Dockerã€€ë°±ê·¸ë¼ìš´ë“œ ì„œë¹„ìŠ¤ ì‹¤í–‰ì„ ìœ„í•´ ë¹„ë°€ë²ˆí˜¸ë¥¼ í•œë²ˆ ìš”êµ¬í•œë‹¤)

#### ROS-Gazeboê°€ ì„¤ì¹˜ëœ Dockerì´ë¯¸ì§€ ì‹¤í–‰

ì•„ë˜ ëª…ë ¹ì–´ë¡œ ROSì™€ Gazeboê°€ ì´ë¯¸ ì„¤ì¹˜ëœ ì´ë¯¸ì§€ë¥¼ êµ¬ë™ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì´ë•Œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ëŠ” í´ë”ë¥¼ ë§ˆìš´íŠ¸í•˜ë¯€ë¡œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” ìœ„ì¹˜ì— ì£¼ì˜í•´ì•¼ í•œë‹¤.

```bash
docker run --rm -it -v ~/.Xauthority:/root/.Xauthority \
-e DISPLAY=docker.for.mac.host.internal:0 \
--volume $PWD:/home/user/workdir -w /home/user/workdir \
woensugchoi/ros-gazebo:apple_arm64
```

### X86_64 Ubuntu Podman êµ¬ë™

í•„ìš”ì— ë”°ë¼ X86_64 ì•„í‚¤í…ì³ ê¸°ë°˜ì˜ êµ¬ë™ì´ í•„ìˆ˜ì ì¼ ìˆ˜ ìˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì†ŒìŠ¤ì½”ë“œë“¤ì´ ê³µê°œë˜ì–´ ìˆìœ¼ë¯€ë¡œ ì†ŒìŠ¤ì½”ë“œë¶€í„° ì»´íŒŒì¼ í•˜ë©´ ë˜ì§€ë§Œ, ë¬´ì—‡ì¸ê°€ ë¬¸ì œê°€ ìƒê²¼ì„ ë•Œ ì•„í‚¤í…ì³ê°€ ë‹¤ë¥´ë©´ ë””ë²„ê¹…ì´ ë§¤ìš° ì–´ë ¤ì›Œì§ˆ ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ X86_64ã€€ì•„í‚¤í…ì³ë¥¼ êµ¬ë™í•˜ê¸° ìœ„í•´ Podmanì„ ì´ìš©í•œ ì—ë®¬ë ˆì´íŒ…ì„ ìˆ˜í–‰í•˜ë©´ ì„±ëŠ¥ì— ì†í•´ëŠ” ë³´ë‚˜ ê°œë°œì— ìœ ë¦¬í•  ìˆ˜ ìˆë‹¤. Dockerìì²´ì—ì„œë„ ì• í”Œì˜ ì—ë®¬ë ˆì´í„°ì¸ Rosetta2 ì—”ì§„ ì´ìš©í•œ ì—ë®¬ë ˆì´ì…˜ì„ ì§€ì›í•œë‹¤. Podmanì´ ì‚¬ìš©í•˜ëŠ” QEMUã€€ì—”ì§„ê³¼ì˜ ì„±ëŠ¥ì˜ ë¹„êµëŠ” ì¶”ê°€ì ì¸ ì—°êµ¬ê°€ í•„ìš”í•˜ë‹¤.

* [ì„¤ì¹˜ íŠœí† ë¦¬ì–¼ ë§í¬](https://yeongdocat.notion.site/M1-Macbook-running-X86-Docker-container-e2cfaaadfffd4acdb4101d90e2750805)

```bash
# ë¨¼ì € DISPLAYã€€ë¸Œë¦¿ì§€ ì‹¤í–‰
socat TCP-LISTEN:6000,reuseaddr,fork UNIX-CLIENT:\"$DISPLAY\"

# --- ìƒˆë¡œìš´ í„°ë¯¸ë„ì—ì„œ
# ëª¨ë“  ê·¸ë˜í”½ ë¸Œë¦¿ì§• í—ˆìš©
xhost +
# XQuartzì— 3D ì†Œí”„íŠ¸ì›¨ì–´ê°€ì† í—ˆìš©
defaults read org.xquartz.X11 enable_iglx
# í„°ë¯¸ë„ì—ì„œ ROS Gazeboê°€ ì„¤ì¹˜ëœ ì´ë¯¸ì§€ ì‹¤í–‰
podman run --interactive --rm --device /dev/snd --device /dev/input --device /dev/dri --tty --volume /tmp/.X11-unix:/tmp/.X11-unix:ro --security-opt label=type:container_runtime_t --volume /etc/localtime:/etc/localtime:ro -e DISPLAY=$(hostname):0 --privileged \
--volume $PWD:/home/user/workdir -w /home/user/workdir \
woensugchoi/ros-gazebo:apple_x86_64
```
